# Set the application name
spring.application.name=exploresg-fleet-service

# Run the service on port 8081
server.port=8081

# This is the ONLY secret key property needed for our custom SecurityConfig
application.security.jwt.secret-key=404E635266556A586E3272357538782F413F4428472B4B6250645367566B5970

# Increase logging for security debugging
logging.level.org.springframework.security=DEBUG

# Correlation ID header name (used by RequestCorrelationFilter)
exploresg.logging.correlation-header=X-Correlation-ID

# Slow request threshold in ms (used by RequestLoggingInterceptor via system property fallback)
exploresg.logging.slow-request-threshold=2000

# --- Database Configuration ---
# PostgreSQL connection (using Docker port 5433 for local development)
spring.datasource.url=jdbc:postgresql://localhost:5433/exploresg-fleet-service-db
spring.datasource.username=exploresguser
spring.datasource.password=exploresgpass
spring.datasource.driver-class-name=org.postgresql.Driver

# JPA/Hibernate Properties
spring.jpa.show-sql=false
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect
spring.jpa.properties.hibernate.format_sql=true

# --- START: Database Initialization Fix ---

# Tell Hibernate to create or update the database tables based on our @Entity classes
spring.jpa.hibernate.ddl-auto=update

# Tell Spring to run the data.sql script AFTER Hibernate has created the tables
spring.jpa.defer-datasource-initialization=true

# Always run data.sql on startup
spring.sql.init.mode=always

# --- Swagger/OpenAPI Configuration ---
# Swagger UI path (default: /swagger-ui.html)
springdoc.swagger-ui.path=/swagger-ui.html
# API docs path (default: /v3/api-docs)
springdoc.api-docs.path=/v3/api-docs
# Enable Swagger UI
springdoc.swagger-ui.enabled=true
# Sort operations alphabetically
springdoc.swagger-ui.operationsSorter=alpha
# Sort tags alphabetically
springdoc.swagger-ui.tagsSorter=alpha
# Try-it-out enabled by default
springdoc.swagger-ui.tryItOutEnabled=true
